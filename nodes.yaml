user: ec2-user
keyfile: /home/brunneis/ec2.key
host_tmp_path: /tmp/ancoris/
local_conf_path: conf/

nodes:
   node1: &node1
      public_address: 3.91.33.213
      private_address: 172.31.15.54

   node2: &node2
      public_address: 3.89.183.161
      private_address: 172.31.3.101

   node3: &node3
      public_address: 3.84.126.179
      private_address: 172.31.15.241

services:
   setup:
      nodes:
         -  << : *node1
         -  << : *node2
         -  << : *node3
         
   zookeeper:
      nodes:
         -  << : *node1
            port: 2181
         -  << : *node2
            port: 2181
         -  << : *node3
            port: 2181
      props:
         host_data_path: /data/ancoris/zookeeper/data/
         container_data_path: &data_dir /data/zookeeper/
         host_logs_path: /data/ancoris/zookeeper/logs/
         container_logs_path: /opt/zookeeper/default/logs/
         container_image: catenae/zookeeper-base
         container_name: ancoris-zookeeper
         container_installation_path: /opt/zookeeper/default/
         tick_time: 2000
         init_limit: 5
         sync_limit: 2
         data_dir: *data_dir
         client_port: 2181
         server_port: 3888
         leader_port: 2888
         max_connections: 60
         retained_snaps: 3
         autopurge_interval: 1
            
   kafka:
      nodes:
         -  << : *node1
         -  << : *node2
         -  << : *node3
      props:
         host_data_path: /data/ancoris/kafka/data/
         container_data_path: &log_dir /data/kafka/
         host_logs_path: /data/ancoris/kafka/logs/
         container_logs_path: /opt/kafka/default/logs/
         container_image: catenae/kafka-base
         container_name: ancoris-kafka
         container_installation_path: /opt/kafka/default/
         min_heap: 1G
         max_heap: 1G
         internal_port: 19092
         external_port: 9092
         num_network_threads: 3
         num_io_threads: 8
         socket_send_buffer_bytes: 102400
         socket_receive_buffer_bytes: 102400
         socket_request_max_bytes: 104857600
         log_dirs: *log_dir
         num_partitions: 10
         num_recovery_threads_per_data_dir: 1
         offsets_topic_replication_factor: 3
         transaction_state_log_replication_factor: 3
         transaction_state_log_min_isr: 2
         log_flush_interval_messages: 1 # 10000
         log_flush_interval_ms: 1000
         log_retention_hours: 336
         log_retention_bytes: -1
         log_segment_bytes: 2147483647
         log_retention_check_interval_ms: 3600000
         zookeeper_connection_timeout_ms: 10000
         group_initial_rebalance_delay_ms: 5000
         replica_fetch_max_bytes: 1048576
         message_max_bytes: 1048576
         max_message_bytes: 1048576
         auto_create_topics_enable: True
         unclean_leader_election_enabled: False

   worker:
      nodes:
         -  << : *node1
         -  << : *node2
         -  << : *node3
      props:
         jsonrpc_port: 2048
         container_name: ancoris-worker
         container_image: catenae/ancoris

   master:
      nodes:
         -  << : *node1
      props:
         jsonrpc_port: 4096
         container_name: ancoris-master
         container_image: catenae/ancoris